# Supersonic 数据接入指南

本指南旨在帮助用户（主要是数据分析师或管理员）将业务数据接入 Supersonic 平台，构建语义模型，从而开启 Chat BI（对话式数据分析）之旅。

## 核心概念

在 Supersonic 中，我们不直接复制您的数据，而是通过**语义层 (Semantic Layer)** 来管理数据。您需要定义以下核心对象：

- **数据库 (Database)**: 物理数据的存储位置（如 MySQL, ClickHouse 等）。
- **主题域 (Domain)**: 业务数据的集合，例如“电商业务”、“人力资源”等。
- **模型 (Model)**: 对应物理数据库中的一张或多张表，是定义指标和维度的基础。
- **维度 (Dimension)**: 用于分析的角度，如“时间”、“地区”、“部门”。
- **指标 (Metric)**: 用于衡量的数值，如“销售额”、“人数”、“访问量”。
- **实体 (Entity)**: 具有唯一标识的业务对象，如“用户ID”、“订单号”。

## 接入流程

### 第一步：新建数据库连接

1.  登录 Supersonic 系统，进入 **Headless BI (语义建模)** 界面。
2.  在左侧导航栏或设置菜单中找到 **“数据库管理”** 或 **“数据源配置”**。
3.  点击 **“新建连接”**。
4.  填写以下信息：
    -   **连接名称**: 给该连接起一个易懂的名字。
    -   **数据库类型**: 选择您的数据库类型（支持 MySQL, H2, ClickHouse, StarRocks 等）。
    -   **JDBC URL**: 数据库连接地址 (例如: `jdbc:mysql://localhost:3306/mydb`)。
    -   **用户名**: 数据库用户名。
    -   **密码**: 数据库密码。
5.  点击 **“测试连接”** 确保配置正确，然后保存。

### 第二步：创建主题域 (Domain)

1.  在 **Headless BI** 界面，进入 **“模型管理”** 或 **“主题域管理”**。
2.  点击 **“新建主题域”**。
3.  填写主题域名称（例如：“销售分析”）和描述。
4.  保存。

### 第三步：创建模型 (Model)

1.  进入刚创建的主题域。
2.  点击 **“新建模型”**。
3.  **选择数据源**: 选择第一步创建的数据库连接。
4.  **选择表**: 从数据库中选择一张物理表，或输入 SQL 查询作为模型基础。
5.  **基础配置**:
    -   **模型名称**: 业务上的名称（如“订单明细”）。
    -   **别名**: 方便语义识别的别名。
6.  **定义维度 (Dimensions)**:
    -   勾选表中作为维度的字段（如 `city`, `category`）。
    -   设置维度的业务名称和别名（例如将 `category` 命名为 “商品类目”）。
    -   如果是时间字段，请标记为时间维度，这对于时间序列分析至关重要。
7.  **定义指标 (Metrics)**:
    -   勾选表中作为度量的字段（如 `amount`, `pv`）。
    -   设置聚合方式（如 `SUM`, `COUNT`, `AVG`）。
    -   定义衍生指标（例如：`客单价 = 销售额 / 订单数`）。
8.  **定义实体 (Entities)**:
    -   指定表的主键或核心业务对象ID（如 `user_id`）。
    -   实体有助于跨模型关联和知识图谱构建。
9.  保存模型。

### 第四步：发布与验证

1.  模型创建完成后，通常需要将其状态设置为 **“上线”** 或 **“发布”**。
2.  切换到 **Chat BI (问答对话)** 界面。
3.  在对话框中尝试用自然语言提问，例如：
    -   “上个月的销售额是多少？”
    -   “按城市统计用户数量。”
4.  检查系统生成的 SQL 和查询结果是否符合预期。

## 常见问题

-   **连接失败**: 请检查防火墙设置，确保 Supersonic 服务所在的服务器能够访问您的数据库端口。
-   **查询结果不准**: 请检查语义模型中的维度和指标定义是否准确，特别是聚合函数（SUM vs COUNT）和时间格式。
-   **无法识别问题**: 尝试为维度和指标添加更多的“别名”，以覆盖用户的多种问法。

## 支持的数据库

目前支持包括但不限于以下数据库：
-   MySQL
-   ClickHouse
-   PostgreSQL
-   H2
-   StarRocks
-   Doris

更多高级配置（如权限管理、跨表关联 Join）请参考官方开发文档。
